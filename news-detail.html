<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detail Berita - BEM FKIP UMM</title>
    <link rel="icon" href="logo-bem-trs.png" type="image/x-icon">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@400;700&family=Poppins:wght@700&display=swap" rel="stylesheet">

    <style>
        /* Base body style with the serif font for readability */
        body {
            font-family: 'Merriweather', serif;
            background-color: #f8f8f8; /* A slightly softer white */
        }

        /* Headline Style (Sans-serif, bold, and large) */
        #news-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2.75rem; /* 44px */
            font-weight: 700;
            color: #1a1a1a; /* Very dark grey, not pure black */
            line-height: 1.2;
            margin-bottom: 0.5rem;
        }

        /* Metadata Style (Author & Date) */
        #news-meta {
            font-family: 'Poppins', sans-serif;
            font-size: 0.875rem; /* 14px */
            color: #5a5a5a;
            padding-bottom: 1rem;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #e0e0e0;
        }

        /* Main Article Content Style */
        #news-content {
            color: #333;
            font-size: 1.125rem; /* 18px */
            line-height: 1.8; /* Generous line spacing for easy reading */
        }

        /* Ensure paragraphs inside the content have spacing */
        #news-content p {
            margin-bottom: 1.5rem;
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="bg-white shadow-sm sticky top-0 z-40">
        <nav class="container mx-auto px-4 py-4 flex justify-between items-center">
             <a href="index.html" class="flex items-center space-x-2 text-2xl font-bold text-violet-600" style="font-family: 'Poppins', sans-serif;">
                <img src="logo-bem.JPG" alt="Logo BEM FKIP UMM" class="h-14 w-14 rounded-full">
                <span>BEM FKIP UMM</span>
            </a>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-12">
        <div id="article-container" class="max-w-4xl mx-auto bg-white p-8 sm:p-12 rounded-lg shadow-lg">
            <h1 id="news-title">Memuat Berita...</h1>
            <div id="news-meta">
                </div>
            <img id="news-image" src="https://placehold.co/800x400/cccccc/ffffff?text=Loading" alt="Loading image" class="w-full h-auto rounded-lg mb-8">
            <div id="news-content">
                <p>Silakan tunggu...</p>
            </div>
            <a href="index.html" class="inline-block mt-8 text-violet-600 hover:underline" style="font-family: 'Poppins', sans-serif;">&larr; Kembali ke semua berita</a>
        </div>
    </main>

    <footer class="bg-gray-800 text-gray-400 py-6 px-4 text-center mt-auto">
        <p>&copy; 2025 BEM FKIP UMM Divisi Media & Komunikasi. Hak Cipta Dilindungi.</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAK2s6ex4tj7ycOPiEqb_bnatojCFCTMzg",
            authDomain: "bemfkip-a5bb1.firebaseapp.com",
            projectId: "bemfkip-a5bb1",
            storageBucket: "bemfkip-a5bb1.firebasestorage.app",
            messagingSenderId: "717492980350",
            appId: "1:717492980350:web:e602c64e54d616daf2a62f"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        async function loadArticle() {
            const urlParams = new URLSearchParams(window.location.search);
            const newsId = urlParams.get('id');

            if (!newsId) {
                document.getElementById('article-container').innerHTML = '<h1>Artikel tidak ditemukan.</h1><p>ID artikel tidak ada di URL.</p>';
                return;
            }

            try {
                const docRef = doc(db, "news", newsId);
                const docSnap = await getDoc(docRef);

                if (docSnap.exists()) {
                    const news = docSnap.data();
                    
                    document.title = news.title + " - BEM FKIP UMM";
                    document.getElementById('news-title').textContent = news.title;
                    document.getElementById('news-image').src = news.imageUrl;
                    document.getElementById('news-image').alt = news.title;
                    document.getElementById('news-meta').innerHTML = `<span>By ${news.author}</span> &bull; <span>${news.date}</span>`;

                    const paragraphsArray = news.content.split('\n').filter(p => p.trim() !== '');
                    const contentHtml = paragraphsArray.map(p => `<p>${p.trim()}</p>`).join('');
                    document.getElementById('news-content').innerHTML = contentHtml;
                    
                } else {
                     document.getElementById('article-container').innerHTML = '<h1>Artikel tidak ditemukan.</h1><p>Tidak ada berita dengan ID ini.</p>';
                }
            } catch (error) {
                console.error("Error fetching document:", error);
                document.getElementById('article-container').innerHTML = '<h1>Terjadi Kesalahan</h1><p>Tidak dapat memuat artikel.</p>';
            }
        }

        loadArticle();
    </script>

</body>
</html>